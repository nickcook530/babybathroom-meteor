
<head>
    <title>BabyBathroom</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
</head>

<body>
  <h1>Baby Bathroom</h1>
  {{> locate}}
  {{> map}}
</body>

<template name="locate">
  <div>
  <form class="loc-form">
    <input id="manual-location" size="50" type="text" placeholder="Your location here..."> <button type="submit">Locate!</button>
  </form>
  </div>
</template>

<template name="map">
    <div id="map"></div>
    <script>
        /**
     * The CenterControl adds a control to the map that recenters the map on
     * Chicago.
     * This constructor takes the control DIV as an argument.
     * @constructor
     */
    function CenterControl(controlDiv, map) {

      // Set CSS for the control border.
      var controlUI = document.createElement('div');
      controlUI.style.backgroundColor = '#fff';
      controlUI.style.border = '2px solid #fff';
      controlUI.style.borderRadius = '3px';
      controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
      controlUI.style.cursor = 'pointer';
      controlUI.style.marginBottom = '22px';
      controlUI.style.textAlign = 'center';
      controlUI.title = 'Click to recenter the map';
      controlDiv.appendChild(controlUI);

      // Set CSS for the control interior.
      var controlText = document.createElement('div');
      controlText.style.color = 'rgb(25,25,25)';
      controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
      controlText.style.fontSize = '16px';
      controlText.style.lineHeight = '38px';
      controlText.style.paddingLeft = '5px';
      controlText.style.paddingRight = '5px';
      controlText.innerHTML = 'Center Map';
      controlUI.appendChild(controlText);

      // Setup the click event listeners: simply set the map to Chicago.
      controlUI.addEventListener('click', function() {
        map.setCenter(POS);
      });

      }
    // Note: This example requires that you consent to location sharing when
    // prompted by your browser. If you see the error "The Geolocation service
    // failed.", it means you probably did not give permission for the browser to
    // locate you.
    var map, infoWindow;
    function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        center: {lat: -34.397, lng: 150.644},
        mapTypeId: 'roadmap',
        mapTypeControl: false,
        streetViewControl: false,
        fullscreenControl: false,
        gestureHandling: 'greedy',
        zoom: 16,
        minZoom: 14,
        maxZoom: 18,
      });
      infoWindow = new google.maps.InfoWindow;
      //location code taken here
      // Create the DIV to hold the control and call the CenterControl()
      // constructor passing in this DIV.
      var centerControlDiv = document.createElement('div');
      var centerControl = new CenterControl(centerControlDiv, map);

      centerControlDiv.index = 1;
      map.controls[google.maps.ControlPosition.BOTTOM_LEFT].push(centerControlDiv);

      AUTOCOMPLETE = new google.maps.places.Autocomplete(document.getElementById('manual-location'));
      google.maps.event.addListener(AUTOCOMPLETE, 'place_changed', function() {
        // Need to stop from firing if ENTER is pressed instead of location clicked
        PLACE = AUTOCOMPLETE.getPlace();
        // 
        POS = {
                  lat: PLACE.geometry.location.lat(),
                  lng: PLACE.geometry.location.lng()
              };
        //center map on location and pop up info window
        infoWindow.setPosition(POS);
        infoWindow.setContent('You');
        infoWindow.open(map);
        map.setCenter(POS);
    });
  }
      //error handling code taken here
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDYjRv_69iDTNpIBmnG3-t-8bf40SUmLUE&callback=initMap&libraries=places"
    async defer></script>
</template>